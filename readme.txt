2013-3-24 17:12:48
1，修改接口板登记对话框相关界面.@qingwu
2，增加无事件界面的背景。包括登记时也是在登记对话框下显示无事件背景。@linwotian

2013-3-22 12:00:37
1，单接口板登记ok！应该是要在run函数中运行。如果在普通的public函数中运行，那么就会出现问题。

2013-3-20 14:56:32
1,增加巡检过程中，如果没有接口板登记在线的处理。
2，忽略未登记接口板的上报信息。
3，没有处理单接口登记。
16号版本：
1,增加对接口板通信故障的处理，修改pollingthread.cpp相关代码。
2，在接口板登记线程中增加已经登记的接口板回路号节点号都为0的板级节点，为了后面处理接口板的通信故障。
3，删除database.cpp中对33号楼显的0号节点的信息的insert，而是在巡检线程中，如果当前接口板已经登记，那么就增加该接口板host-boardnum-0-0的节点。
13号版本：
1,解决第二次复位必死机问题。
2,接口板登记线程修改。将接口板登记的函数模块化。

2012年12月20日20:48:21
15，polling线程收数据跟发数据分开之后，在线程中有一个while(1)的循环来读can数据，所以，在复位的时候，这个线程无法停止，导致复位无法正常进行。解决办法：增加一个flag，初始为0，如果系统复位，就置为1，while(!isResetFlag)，这样复位操作就能让这个循环停止了。
16，联动设备有状态改变，要查询总线设置。查到这个设备对应的总线点之后，要去查询这个总线点下所有设备（目前只有一个输入设备一个输出设备）的状态来确定总线点两个灯的状态。
如果这个联动设备在总线点的输入设备中，就处理对应的反馈灯；
如果这个联动设备在总线点的输出设备中，就处理对应的启动灯。
不能将这两种设备和两个灯混到一起处理！！！（done）
17，增加unitset中节点为0的设备。将unitset的主键设为unitid (host<<24) | (boardnum<<16) | (loop<<8) | node)。


2012-12-17 15:58:27
1，getStringItem中，不需要加isIOFlag的判断，因为如果是输入输出，将nodetype传入函数即可。
char shijianma = LINK_SHIJIAN_MA;
char newState = LINK_START_YES_FEEDBACK_STATE;这两个参数是用来确定联动当前状态的。
2，前天的问题：在停止和启动联动上报的时候，那个判断K==当前node语句没加！！现在问题解决了。
3，复位后，主界面列表下面的不在了。在MainWidget::resetSystem()中，eventTabWidget->clear();
修改方案：在主界面增加一个信号，系统复位的时候触发，并连接到eventDialog的一个槽，在槽中对eventDialog进行清理（done）
4，总线逻辑，一对一的情况已经暂时没有问题。


2012-12-13 11:35:17
1，对直控盘总线盘的修改。包括数据库，删除了之前人为写入的数据（比如在线的接口板号等），都采用实际登记的结果。


2012-12-11 11:18:17
1，增加重报警功能。currentFire到来，在火警列表显示，并存入火警哈希表
     if(60s哈希表中包含该节点的item)
     {
          //这里不需要将currentFire添加到60s延时，因为已经判定火警触发，后续到的火警，都将永久在火警列表显示。只是不需要再重复触发联动
           触发火警，并将60s哈希表中之前的一条item删除
     }
      else
     {
          将currentFire放入60s哈希表
     }
2，倒计时的-1显示

2012-12-5 11:29:16
1，QTabWidget中的delayTabelWidget 显示事件的实时更新，每次删除和添加到delayList的时候就要更新（先clear，再刷新）。其他几个TableWidget是一样的处理。
2，打印初始化。
3，发送联动启动命令的情况修改：节点不在联动哈希表中 或者 节点在联动哈希表中且节点状态是未启动。因此，不发送联动启动的情况是：节点在联动哈希表中且状态是已启动。不满足这个条件就发送启动。
4，开机打印提示字符 格式已经比较清楚。如果有需要，可以再进行修改。


2012-11-25 22:20:52
1，修改了联动的四种上报状态的代码。编译通过，其他的bug待测试排查。

2012-11-8 11:00:05
1，删除了不必要的打印调试信息
2，界面显示的提示信息改为中文。
3，单元设置中增加 直控盘 总线盘 批量设置（针对1-32号接口板）


2012-11-6 11:43:55
1，・-・ 我把打印机的代码改了，然后程序崩了 ・-・
2,//this->hide();//this hide,the exec program has bug!!!so we cancel the line!never use it !
3，打印机is ok！
4，界面切换is ok！！火警联动故障！包括单独事件显示！


2012-9-11 20:46:18
1，复位功能，没有发现新的问题。以下测试已经通过：
1）登记线程之前，复位ok
2）登记过程中，复位ok
3）登记结束信息窗口，也就是巡检之前，复位ok
4）巡检过程中，复位0k
如果在测试中发现新的问题，请及时反馈，进行修改。
2，按键和点灯测试通过。
3，可以发出报警声。（待解决的问题：当前有火警、故障、联动，发火警音。在消音之后，如果报故障，仍然发火警音。也就是说，只要当前列表有火警存在，那么，要发报警音，就要是火警音。――――似乎是这样做的哈。。待测试。）
4,删除登记线程中的部分打印消息：收到接口板上报的信息，现在不打印了。


2012-9-5 21:32:25
1，哈希表用QMultiHash类。插入和删除应该没有问题了。
2，故障恢复单次测试通过。

2012-9-4 16:23:28
by 李刚：修改单元设置。增加节点的统计功能。
1）修改info.h将此文件前半部分定义的数据结构删掉，只保留三个字符串数组
2）修改combodelegate.cpp文件，在第6行添加头文件#include "info.h"
   并且修改函数QWidget *comboDelegate::createEditor ()中
   case 2:和case 3:下的内容
3）将unitsetdialog.h和unitsetdialog.cpp全部覆盖

by qingwu：
1，将QHash改为QMultiHash类，方便同一个节点的不同事件类型的插入和查找以及删除。待测试。


2012-8.29 9:41:02
1，下面两种方法都可以试一下。第一种就是从当前删除行的节点开始，对哈希表后面的节点对应的键值-1；第二种方法是对整个哈希表进行遍历，凡是满足条件的键值都进行-1操作。明显后一种方法靠谱些，前一种只是为了提高效率，但是哈希表内部是乱序查找，因此不能保证这样做是对的。

2，有时候窗口切换的时候，程序会done掉。还不知道原因，不过看打印信息，似乎是QThread的问题：线程还在运行的时候，就关闭了什么。之前也遇到过。回去再测试。

3，在单元设置界面增加单项统计的功能。统计当前在线的某种类型的节点数目。

4，登记过程中，增加显示信息：当前正在登记哪一个接口板的哪一个回路。。。sigh。



2012-8-21 11:21:58
1，
2，
3，添加上报事件类型处理，但是没有具体操作。
4，删除登记线程中跟文件有关的代码。


1，窗口切换的问题。火警到来时，将当前的子窗口关闭，并将menu窗口隐藏。
2，获取事件类型。